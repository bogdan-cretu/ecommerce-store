{"ast":null,"code":"var _jsxFileName = \"/Users/donkeydesktop/Desktop/MERN COURSE/Personal projects/e-commerce/all purpose store git/ecommerce-store/src/context/StateContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\nimport { toast } from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Context = /*#__PURE__*/createContext();\nexport const StateContext = ({\n  children\n}) => {\n  _s();\n  const currentCart = JSON.parse(localStorage.getItem('cartItems'));\n  const currentTotalPrice = JSON.parse(localStorage.getItem('totalPrice'));\n  const currentQuantities = JSON.parse(localStorage.getItem('totalQuantities'));\n  const [showCart, setShowCart] = useState(false);\n  const [cartItems, setCartItems] = useState(currentCart ? currentCart : []);\n  const [totalPrice, setTotalPrice] = useState(currentTotalPrice ? currentTotalPrice : 0);\n  const [totalQuantities, setTotalQuantities] = useState(currentQuantities ? currentQuantities : 0);\n  const [qty, setQty] = useState(1);\n  let foundProduct;\n  // let index;\n\n  useEffect(() => {\n    localStorage.setItem('cartItems', JSON.stringify(cartItems));\n    localStorage.setItem('totalPrice', JSON.stringify(totalPrice));\n    localStorage.setItem('totalQuantities', JSON.stringify(totalQuantities));\n  }, [cartItems, totalPrice, totalQuantities]);\n  const onAdd = (product, quantity) => {\n    const checkProductInCart = cartItems.find(item => item._id === product._id);\n    setTotalPrice(prevTotalPrice => prevTotalPrice + product.price * quantity);\n    setTotalQuantities(prevTotalQuantities => prevTotalQuantities + product.quantity);\n    if (checkProductInCart) {\n      const updatedCartItems = cartItems.map(cartProduct => {\n        if (cartProduct._id === product._id) return {\n          ...cartProduct,\n          quantity: cartProduct.quantity + quantity\n        };\n        return null;\n      });\n      setCartItems(updatedCartItems);\n    } else {\n      product.quantity = quantity;\n      setCartItems([...cartItems, {\n        ...product\n      }]);\n    }\n    toast.success(`${qty} ${product.name} added to the cart`);\n  };\n  const onRemove = product => {\n    foundProduct = cartItems.find(item => item._id === product._id);\n    const newCartItems = cartItems.filter(item => item._id !== product._id);\n    setTotalPrice(prevTotalPrice => prevTotalPrice - foundProduct.price * foundProduct.quantity);\n    setTotalQuantities(prevTotalQuantities => prevTotalQuantities - foundProduct.quantity);\n    setCartItems(newCartItems);\n  };\n  const toggleCartItemQuantity = (id, value) => {\n    foundProduct = cartItems.find(item => item._id === id);\n    // index = cartItems.findIndex((product) => product._id === id)\n    const newCartItems = cartItems.filter(item => item._id !== id);\n    if (value === 'inc') {\n      setCartItems([...newCartItems, {\n        ...foundProduct,\n        quantity: foundProduct.quantity + 1\n      }]);\n      setTotalPrice(prevTotalPrice => prevTotalPrice + foundProduct.price);\n      setTotalQuantities(prevTotalQuantities => prevTotalQuantities + 1);\n    } else if (value === 'dec') {\n      if (foundProduct.quantity > 1) {\n        setCartItems([...newCartItems, {\n          ...foundProduct,\n          quantity: foundProduct.quantity - 1\n        }]);\n        setTotalPrice(prevTotalPrice => prevTotalPrice - foundProduct.price);\n        setTotalQuantities(prevTotalQuantities => prevTotalQuantities - 1);\n      }\n    }\n  };\n  const incQty = () => {\n    setQty(prevQty => prevQty + 1);\n  };\n  const decQty = () => {\n    setQty(prevQty => {\n      if (prevQty - 1 < 1) return 1;\n      return prevQty - 1;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    value: {\n      showCart,\n      cartItems,\n      totalPrice,\n      totalQuantities,\n      qty,\n      incQty,\n      decQty,\n      onAdd,\n      setShowCart,\n      toggleCartItemQuantity,\n      onRemove\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 9\n  }, this);\n};\n_s(StateContext, \"aYruEFMxiBwkDxiYYRoOkunK8ao=\");\n_c = StateContext;\nexport const useStateContext = () => {\n  _s2();\n  return useContext(Context);\n};\n_s2(useStateContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"StateContext\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","toast","jsxDEV","_jsxDEV","Context","StateContext","children","_s","currentCart","JSON","parse","localStorage","getItem","currentTotalPrice","currentQuantities","showCart","setShowCart","cartItems","setCartItems","totalPrice","setTotalPrice","totalQuantities","setTotalQuantities","qty","setQty","foundProduct","setItem","stringify","onAdd","product","quantity","checkProductInCart","find","item","_id","prevTotalPrice","price","prevTotalQuantities","updatedCartItems","map","cartProduct","success","name","onRemove","newCartItems","filter","toggleCartItemQuantity","id","value","incQty","prevQty","decQty","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useStateContext","_s2","$RefreshReg$"],"sources":["/Users/donkeydesktop/Desktop/MERN COURSE/Personal projects/e-commerce/all purpose store git/ecommerce-store/src/context/StateContext.js"],"sourcesContent":["import React, {createContext, useContext, useState, useEffect} from \"react\";\nimport {toast} from 'react-hot-toast'\n\nconst Context = createContext();\n\nexport const StateContext = ({children}) =>{\n    const currentCart = JSON.parse(localStorage.getItem('cartItems'))\n    const currentTotalPrice = JSON.parse(localStorage.getItem('totalPrice'))\n    const currentQuantities = JSON.parse(localStorage.getItem('totalQuantities'))\n\n    \n\n    const [showCart, setShowCart] = useState(false)\n    const [cartItems, setCartItems] = useState(currentCart ? currentCart : [])\n    const [totalPrice, setTotalPrice] = useState(currentTotalPrice ? currentTotalPrice : 0)\n    const [totalQuantities, setTotalQuantities] = useState(currentQuantities ? currentQuantities : 0)\n    const [qty, setQty] = useState(1)\n\n    let foundProduct;\n    // let index;\n    \n\n    \n\n    useEffect(() => {\n        localStorage.setItem('cartItems', JSON.stringify(cartItems))\n        localStorage.setItem('totalPrice', JSON.stringify(totalPrice))\n        localStorage.setItem('totalQuantities', JSON.stringify(totalQuantities))  \n        \n\n    }, [cartItems, totalPrice, totalQuantities])\n    \n\n    const onAdd = (product, quantity) =>{\n        const checkProductInCart = cartItems.find((item) => item._id === product._id)\n        setTotalPrice((prevTotalPrice) => prevTotalPrice + product.price*quantity)\n        setTotalQuantities((prevTotalQuantities) => prevTotalQuantities + product.quantity)\n\n        if(checkProductInCart){\n            const updatedCartItems = cartItems.map((cartProduct)=>{\n                if(cartProduct._id === product._id) return{\n                    ...cartProduct,\n                    quantity: cartProduct.quantity + quantity\n                }\n            return null})\n            setCartItems(updatedCartItems)\n            \n        } else{\n            product.quantity = quantity\n            setCartItems([...cartItems, {...product}])\n        }\n        toast.success(`${qty} ${product.name} added to the cart`)\n    }\n\n    const onRemove = (product) => {\n        foundProduct = cartItems.find((item)=> item._id === product._id)\n        const newCartItems = cartItems.filter((item) => item._id !== product._id)\n\n        setTotalPrice((prevTotalPrice) => prevTotalPrice - foundProduct.price * foundProduct.quantity)\n        setTotalQuantities((prevTotalQuantities) => prevTotalQuantities - foundProduct.quantity)\n        setCartItems(newCartItems)\n    }\n\n    const toggleCartItemQuantity = (id, value) =>{\n        foundProduct = cartItems.find((item)=> item._id === id)\n        // index = cartItems.findIndex((product) => product._id === id)\n        const newCartItems = cartItems.filter((item) => item._id !== id)\n\n        if (value === 'inc'){\n            \n            setCartItems([...newCartItems, {...foundProduct, quantity: foundProduct.quantity + 1}])\n            setTotalPrice((prevTotalPrice) => prevTotalPrice + foundProduct.price)\n            setTotalQuantities((prevTotalQuantities) => prevTotalQuantities + 1)\n            \n            \n        } else if (value === 'dec'){\n            if (foundProduct.quantity > 1){\n                setCartItems([...newCartItems, {...foundProduct, quantity: foundProduct.quantity - 1}])\n            setTotalPrice((prevTotalPrice) => prevTotalPrice - foundProduct.price)\n            setTotalQuantities((prevTotalQuantities) => prevTotalQuantities - 1)\n            }\n        }\n    }\n\n    const incQty = () =>{\n        setQty((prevQty) => prevQty + 1)\n    }\n\n    const decQty = () =>{\n        setQty((prevQty) => {\n            if (prevQty - 1 < 1) return 1\n            return prevQty - 1\n        })\n    }\n\n    return (\n        <Context.Provider\n        value = {{\n            showCart,\n            cartItems,\n            totalPrice,\n            totalQuantities,\n            qty,\n            incQty,\n            decQty,\n            onAdd,\n            setShowCart,\n            toggleCartItemQuantity,\n            onRemove,\n        }}\n        >\n            {children}\n        </Context.Provider>\n    )\n}\n\nexport const useStateContext = () => useContext(Context)"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}